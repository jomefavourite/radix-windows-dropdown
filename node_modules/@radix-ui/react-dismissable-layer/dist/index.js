var e,t,n,r=require("@radix-ui/react-use-escape-keydown").useEscapeKeydown,o=require("@radix-ui/react-use-callback-ref").useCallbackRef,u=require("@radix-ui/react-use-body-pointer-events").useBodyPointerEvents,i=require("@radix-ui/react-context").createContext,a=require("@radix-ui/react-primitive").Primitive,s=require("@radix-ui/primitive").composeEventHandlers,c=(e={},t=require("react"),Object.keys(t).forEach((function(n){"default"!==n&&"__esModule"!==n&&Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})})),e),l=(n=require("@babel/runtime/helpers/extends"))&&n.__esModule?n.default:n;const[d,f]=L(),[m,v]=P(),[E,p]=L("TotalLayerCountWithDisabledOutsidePointerEventsProvider"),[C,b]=P("RunningLayerCountWithDisabledOutsidePointerEventsProvider"),y=/*#__PURE__*/c.forwardRef(((e,t)=>{const n=0===v(),r=/*#__PURE__*/c.createElement(w,l({},e,{ref:t}));return n?/*#__PURE__*/c.createElement(d,null,/*#__PURE__*/c.createElement(E,null,r)):r}));exports.DismissableLayer=y;const w=/*#__PURE__*/c.forwardRef(((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:d,onFocusOutside:E,onInteractOutside:y,onDismiss:w,...L}=e,P=f(),D=v()+1,O=D===P,g=p(n),x=b()+(n?1:0),T=x<g;u({disabled:n}),r((e=>{O&&(null==i||i(e),e.defaultPrevented||null==w||w())}));const{onPointerDownCapture:R}=function(e){const t=o(e),n=c.useRef(!1);return c.useEffect((()=>{const e=e=>{const r=e.target;if(r&&!n.current){const n=new CustomEvent("dismissableLayer.pointerDownOutside",{bubbles:!1,cancelable:!0,detail:{originalEvent:e}});r.addEventListener("dismissableLayer.pointerDownOutside",t,{once:!0}),r.dispatchEvent(n)}n.current=!1},r=window.setTimeout((()=>{document.addEventListener("pointerdown",e)}),0);return()=>{window.clearTimeout(r),document.removeEventListener("pointerdown",e)}}),[t]),{onPointerDownCapture:()=>n.current=!0}}((e=>{T||(null==d||d(e),null==y||y(e),e.defaultPrevented||null==w||w())})),{onBlurCapture:h,onFocusCapture:q}=function(e){const t=o(e),n=c.useRef(!1);return c.useEffect((()=>{const e=e=>{const r=e.target;if(r&&!n.current){const n=new CustomEvent("dismissableLayer.focusOutside",{bubbles:!1,cancelable:!0,detail:{originalEvent:e}});r.addEventListener("dismissableLayer.focusOutside",t,{once:!0}),r.dispatchEvent(n)}};return document.addEventListener("focusin",e),()=>document.removeEventListener("focusin",e)}),[t]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}((e=>{null==E||E(e),null==y||y(e),e.defaultPrevented||null==w||w()})),k=g>0&&!T;/*#__PURE__*/return c.createElement(m,{runningCount:D},/*#__PURE__*/c.createElement(C,{runningCount:x},/*#__PURE__*/c.createElement(a.div,l({},L,{ref:t,style:{pointerEvents:k?"auto":void 0,...L.style},onPointerDownCapture:s(e.onPointerDownCapture,R),onBlurCapture:s(e.onBlurCapture,h),onFocusCapture:s(e.onFocusCapture,q)}))))}));function L(e){const[t,n]=i("TotalLayerCount",{total:0,onTotalIncrease:()=>{},onTotalDecrease:()=>{}}),r=({children:e})=>{const[n,r]=c.useState(0);/*#__PURE__*/return c.createElement(t,{total:n,onTotalIncrease:c.useCallback((()=>r((e=>e+1))),[]),onTotalDecrease:c.useCallback((()=>r((e=>e-1))),[])},e)};return[r,function(e=!0){const{total:t,onTotalIncrease:r,onTotalDecrease:o}=n("TotalLayerCountConsumer");return c.useLayoutEffect((()=>{if(e)return r(),()=>o()}),[e,r,o]),t}]}function P(e){const[t,n]=i("RunningLayerCount",{count:0}),r=e=>{const{children:n,runningCount:r}=e;/*#__PURE__*/return c.createElement(t,{count:r},n)};return[r,function(){return n("RunningLayerCountConsumer").count||0}]}const D=y;exports.Root=D;
//# sourceMappingURL=index.js.map
