{"ast":null,"code":"import _createForOfIteratorHelper from \"/project/radix-windows-dropdown/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _objectSpread from \"/project/radix-windows-dropdown/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _objectWithoutProperties from \"/project/radix-windows-dropdown/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nimport _slicedToArray from \"/project/radix-windows-dropdown/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _excluded = [\"__scopeMenu\"],\n    _excluded2 = [\"forceMount\"],\n    _excluded3 = [\"__scopeMenu\", \"loop\", \"trapFocus\", \"onOpenAutoFocus\", \"onCloseAutoFocus\", \"disableOutsidePointerEvents\", \"onEscapeKeyDown\", \"onPointerDownOutside\", \"onFocusOutside\", \"onInteractOutside\", \"onDismiss\", \"disableOutsideScroll\", \"allowPinchZoom\", \"portalled\"],\n    _excluded4 = [\"__scopeMenu\"],\n    _excluded5 = [\"__scopeMenu\"],\n    _excluded6 = [\"disabled\", \"onSelect\"],\n    _excluded7 = [\"__scopeMenu\", \"disabled\", \"textValue\"],\n    _excluded8 = [\"checked\", \"onCheckedChange\"],\n    _excluded9 = [\"value\", \"onValueChange\"],\n    _excluded10 = [\"value\"],\n    _excluded11 = [\"__scopeMenu\", \"forceMount\"],\n    _excluded12 = [\"__scopeMenu\"],\n    _excluded13 = [\"__scopeMenu\"];\nimport { useId as e } from \"@radix-ui/react-id\";\nimport { useFocusGuards as t } from \"@radix-ui/react-focus-guards\";\nimport { useCallbackRef as n } from \"@radix-ui/react-use-callback-ref\";\nimport { useDirection as r } from \"@radix-ui/react-use-direction\";\nimport * as o from \"@radix-ui/react-roving-focus\";\nimport { createRovingFocusGroupScope as u } from \"@radix-ui/react-roving-focus\";\nimport { Portal as c } from \"@radix-ui/react-portal\";\nimport * as a from \"@radix-ui/react-popper\";\nimport { createPopperScope as i } from \"@radix-ui/react-popper\";\nimport { Primitive as s } from \"@radix-ui/react-primitive\";\nimport { Presence as l } from \"@radix-ui/react-presence\";\nimport { FocusScope as d } from \"@radix-ui/react-focus-scope\";\nimport { DismissableLayer as p } from \"@radix-ui/react-dismissable-layer\";\nimport { createContextScope as f } from \"@radix-ui/react-context\";\nimport { useComposedRefs as m, composeRefs as v } from \"@radix-ui/react-compose-refs\";\nimport { createCollection as g } from \"@radix-ui/react-collection\";\nimport { composeEventHandlers as M } from \"@radix-ui/primitive\";\nimport { hideOthers as h } from \"aria-hidden\";\nimport { RemoveScroll as C } from \"react-remove-scroll\";\nimport * as E from \"react\";\nimport w from \"@babel/runtime/helpers/esm/extends\";\n\nvar x = [\"Enter\", \" \"],\n    b = [\"ArrowUp\", \"PageDown\", \"End\"],\n    R = [\"ArrowDown\", \"PageUp\", \"Home\"].concat(b),\n    _ = {\n  ltr: [].concat(x, [\"ArrowRight\"]),\n  rtl: [].concat(x, [\"ArrowLeft\"])\n},\n    y = {\n  ltr: [\"ArrowLeft\"],\n  rtl: [\"ArrowRight\"]\n},\n    _g = g(\"Menu\"),\n    _g2 = _slicedToArray(_g, 3),\n    I = _g2[0],\n    k = _g2[1],\n    P = _g2[2],\n    _f = f(\"Menu\", [P, i, u]),\n    _f2 = _slicedToArray(_f, 2),\n    D = _f2[0],\n    S = _f2[1];\n\nexport { S as createMenuScope };\n\nvar O = i(),\n    T = u(),\n    _D = D(\"Menu\"),\n    _D2 = _slicedToArray(_D, 2),\n    L = _D2[0],\n    A = _D2[1];\n\nexport var Menu = function Menu(e) {\n  var t = e.__scopeMenu,\n      _e$open = e.open,\n      o = _e$open === void 0 ? !1 : _e$open,\n      u = e.children,\n      c = e.onOpenChange,\n      _e$modal = e.modal,\n      i = _e$modal === void 0 ? !0 : _e$modal,\n      s = O(t),\n      _E$useState = E.useState(null),\n      _E$useState2 = _slicedToArray(_E$useState, 2),\n      l = _E$useState2[0],\n      d = _E$useState2[1],\n      p = E.useRef(!1),\n      f = n(c),\n      m = r(l, e.dir);\n\n  return E.useEffect(function () {\n    var e = function e() {\n      return p.current = !0;\n    },\n        t = function t() {\n      return p.current = !1;\n    };\n\n    return document.addEventListener(\"keydown\", e, {\n      capture: !0\n    }), document.addEventListener(\"pointerdown\", t, {\n      capture: !0\n    }), document.addEventListener(\"pointermove\", t, {\n      capture: !0\n    }), function () {\n      document.removeEventListener(\"keydown\", e, {\n        capture: !0\n      }), document.removeEventListener(\"pointerdown\", t, {\n        capture: !0\n      }), document.removeEventListener(\"pointermove\", t, {\n        capture: !0\n      });\n    };\n  }, []), /*#__PURE__*/E.createElement(a.Root, s, /*#__PURE__*/E.createElement(L, {\n    scope: t,\n    isSubmenu: !1,\n    isUsingKeyboardRef: p,\n    dir: m,\n    open: o,\n    onOpenChange: f,\n    content: l,\n    onContentChange: d,\n    onRootClose: E.useCallback(function () {\n      return f(!1);\n    }, [f]),\n    modal: i\n  }, u));\n};\n/*#__PURE__*/\n\nexport var MenuSub = function MenuSub(t) {\n  var r = t.__scopeMenu,\n      o = t.children,\n      _t$open = t.open,\n      u = _t$open === void 0 ? !1 : _t$open,\n      c = t.onOpenChange,\n      i = A(\"MenuSub\", r),\n      s = O(r),\n      _E$useState3 = E.useState(null),\n      _E$useState4 = _slicedToArray(_E$useState3, 2),\n      l = _E$useState4[0],\n      d = _E$useState4[1],\n      _E$useState5 = E.useState(null),\n      _E$useState6 = _slicedToArray(_E$useState5, 2),\n      p = _E$useState6[0],\n      f = _E$useState6[1],\n      m = n(c);\n\n  return E.useEffect(function () {\n    return !1 === i.open && m(!1), function () {\n      return m(!1);\n    };\n  }, [i.open, m]), /*#__PURE__*/E.createElement(a.Root, s, /*#__PURE__*/E.createElement(L, {\n    scope: r,\n    isSubmenu: !0,\n    isUsingKeyboardRef: i.isUsingKeyboardRef,\n    dir: i.dir,\n    open: u,\n    onOpenChange: m,\n    content: p,\n    onContentChange: f,\n    onRootClose: i.onRootClose,\n    contentId: e(),\n    trigger: l,\n    onTriggerChange: d,\n    triggerId: e(),\n    modal: !1\n  }, o));\n};\n/*#__PURE__*/\n\nexport var MenuAnchor = /*#__PURE__*/E.forwardRef(function (e, t) {\n  var n = e.__scopeMenu,\n      r = _objectWithoutProperties(e, _excluded),\n      o = O(n);\n  /*#__PURE__*/\n\n\n  return E.createElement(a.Anchor, w({}, o, r, {\n    ref: t\n  }));\n});\n/*#__PURE__*/\n\nvar _D3 = D(\"MenuContent\"),\n    _D4 = _slicedToArray(_D3, 2),\n    F = _D4[0],\n    K = _D4[1];\n\nexport var MenuContent = /*#__PURE__*/E.forwardRef(function (e, t) {\n  var n = e.forceMount,\n      r = _objectWithoutProperties(e, _excluded2),\n      o = A(\"MenuContent\", e.__scopeMenu);\n  /*#__PURE__*/\n\n\n  return E.createElement(I.Provider, {\n    scope: e.__scopeMenu\n  }, /*#__PURE__*/E.createElement(l, {\n    present: n || o.open\n  }, /*#__PURE__*/E.createElement(I.Slot, {\n    scope: e.__scopeMenu\n  }, o.isSubmenu ? /*#__PURE__*/E.createElement(X, w({}, r, {\n    ref: t\n  })) : /*#__PURE__*/E.createElement(G, w({}, r, {\n    ref: t\n  })))));\n});\nvar G = /*#__PURE__*/E.forwardRef(function (e, t) {\n  return A(\"MenuContent\", e.__scopeMenu).modal ? /*#__PURE__*/E.createElement(U, w({}, e, {\n    ref: t\n  })) : /*#__PURE__*/E.createElement(V, w({}, e, {\n    ref: t\n  }));\n}),\n    U = /*#__PURE__*/E.forwardRef(function (e, t) {\n  var n = A(\"MenuContent\", e.__scopeMenu),\n      r = E.useRef(null),\n      o = m(t, r);\n  return E.useEffect(function () {\n    var e = r.current;\n    if (e) return h(e);\n  }, []), /*#__PURE__*/E.createElement(B, w({}, e, {\n    ref: o,\n    trapFocus: n.open,\n    disableOutsidePointerEvents: n.open,\n    disableOutsideScroll: !0,\n    onFocusOutside: M(e.onFocusOutside, function (e) {\n      return e.preventDefault();\n    }, {\n      checkForDefaultPrevented: !1\n    }),\n    onDismiss: function onDismiss() {\n      return n.onOpenChange(!1);\n    }\n  }));\n}),\n    V = /*#__PURE__*/E.forwardRef(function (e, t) {\n  var n = A(\"MenuContent\", e.__scopeMenu);\n  /*#__PURE__*/\n\n  return E.createElement(B, w({}, e, {\n    ref: t,\n    trapFocus: !1,\n    disableOutsidePointerEvents: !1,\n    disableOutsideScroll: !1,\n    onDismiss: function onDismiss() {\n      return n.onOpenChange(!1);\n    }\n  }));\n}),\n    X = /*#__PURE__*/E.forwardRef(function (e, t) {\n  var n = A(\"MenuContent\", e.__scopeMenu),\n      r = E.useRef(null),\n      o = m(t, r);\n  return n.isSubmenu ? /*#__PURE__*/E.createElement(B, w({\n    id: n.contentId,\n    \"aria-labelledby\": n.triggerId\n  }, e, {\n    ref: o,\n    align: \"start\",\n    side: \"rtl\" === n.dir ? \"left\" : \"right\",\n    portalled: !0,\n    disableOutsidePointerEvents: !1,\n    disableOutsideScroll: !1,\n    trapFocus: !1,\n    onOpenAutoFocus: function onOpenAutoFocus(e) {\n      var t;\n      n.isUsingKeyboardRef.current && (null === (t = r.current) || void 0 === t || t.focus()), e.preventDefault();\n    },\n    onCloseAutoFocus: function onCloseAutoFocus(e) {\n      return e.preventDefault();\n    },\n    onFocusOutside: M(e.onFocusOutside, function (e) {\n      e.target !== n.trigger && n.onOpenChange(!1);\n    }),\n    onEscapeKeyDown: M(e.onEscapeKeyDown, n.onRootClose),\n    onKeyDown: M(e.onKeyDown, function (e) {\n      var t = e.currentTarget.contains(e.target),\n          r = y[n.dir].includes(e.key);\n      var o;\n      t && r && (n.onOpenChange(!1), null === (o = n.trigger) || void 0 === o || o.focus(), e.preventDefault());\n    })\n  })) : null;\n}),\n    B = /*#__PURE__*/E.forwardRef(function (e, n) {\n  var r = e.__scopeMenu,\n      _e$loop = e.loop,\n      u = _e$loop === void 0 ? !1 : _e$loop,\n      i = e.trapFocus,\n      s = e.onOpenAutoFocus,\n      l = e.onCloseAutoFocus,\n      f = e.disableOutsidePointerEvents,\n      v = e.onEscapeKeyDown,\n      g = e.onPointerDownOutside,\n      h = e.onFocusOutside,\n      x = e.onInteractOutside,\n      _ = e.onDismiss,\n      y = e.disableOutsideScroll,\n      I = e.allowPinchZoom,\n      P = e.portalled,\n      D = _objectWithoutProperties(e, _excluded3),\n      S = A(\"MenuContent\", r),\n      L = O(r),\n      K = T(r),\n      G = k(r),\n      _E$useState7 = E.useState(null),\n      _E$useState8 = _slicedToArray(_E$useState7, 2),\n      U = _E$useState8[0],\n      V = _E$useState8[1],\n      X = E.useRef(null),\n      B = m(n, X, S.onContentChange),\n      Y = E.useRef(0),\n      Z = E.useRef(\"\"),\n      z = E.useRef(0),\n      H = E.useRef(null),\n      W = E.useRef(\"right\"),\n      q = E.useRef(0),\n      N = P ? c : E.Fragment,\n      Q = y ? C : E.Fragment,\n      $ = y ? {\n    allowPinchZoom: I\n  } : void 0,\n      ee = function ee(e) {\n    var t, n;\n\n    var r = Z.current + e,\n        o = G().filter(function (e) {\n      return !e.disabled;\n    }),\n        u = document.activeElement,\n        c = null === (t = o.find(function (e) {\n      return e.ref.current === u;\n    })) || void 0 === t ? void 0 : t.textValue,\n        a = function (e, t, n) {\n      var r = t.length > 1 && Array.from(t).every(function (e) {\n        return e === t[0];\n      }) ? t[0] : t,\n          o = n ? e.indexOf(n) : -1;\n      var u = (c = e, a = Math.max(o, 0), c.map(function (e, t) {\n        return c[(a + t) % c.length];\n      }));\n      var c, a;\n      1 === r.length && (u = u.filter(function (e) {\n        return e !== n;\n      }));\n      var i = u.find(function (e) {\n        return e.toLowerCase().startsWith(r.toLowerCase());\n      });\n      return i !== n ? i : void 0;\n    }(o.map(function (e) {\n      return e.textValue;\n    }), r, c),\n        i = null === (n = o.find(function (e) {\n      return e.textValue === a;\n    })) || void 0 === n ? void 0 : n.ref.current;\n\n    !function e(t) {\n      Z.current = t, window.clearTimeout(Y.current), \"\" !== t && (Y.current = window.setTimeout(function () {\n        return e(\"\");\n      }, 1e3));\n    }(r), i && setTimeout(function () {\n      return i.focus();\n    });\n  };\n\n  E.useEffect(function () {\n    return function () {\n      return window.clearTimeout(Y.current);\n    };\n  }, []), t();\n  var te = E.useCallback(function (e) {\n    var t, n;\n    return W.current === (null === (t = H.current) || void 0 === t ? void 0 : t.side) && function (e, t) {\n      if (!t) return !1;\n      return function (e, t) {\n        var n = e.x,\n            r = e.y;\n        var o = !1;\n\n        for (var _e = 0, _u = t.length - 1; _e < t.length; _u = _e++) {\n          var _c = t[_e].x,\n              _a = t[_e].y,\n              _i = t[_u].x,\n              _s = t[_u].y;\n          _a > r != _s > r && n < (_i - _c) * (r - _a) / (_s - _a) + _c && (o = !o);\n        }\n\n        return o;\n      }({\n        x: e.clientX,\n        y: e.clientY\n      }, t);\n    }(e, null === (n = H.current) || void 0 === n ? void 0 : n.area);\n  }, []);\n  /*#__PURE__*/\n\n  return E.createElement(N, null, /*#__PURE__*/E.createElement(Q, $, /*#__PURE__*/E.createElement(F, {\n    scope: r,\n    searchRef: Z,\n    onItemEnter: E.useCallback(function (e) {\n      te(e) && e.preventDefault();\n    }, [te]),\n    onItemLeave: E.useCallback(function (e) {\n      var t;\n      te(e) || (null === (t = X.current) || void 0 === t || t.focus(), V(null));\n    }, [te]),\n    onTriggerLeave: E.useCallback(function (e) {\n      te(e) && e.preventDefault();\n    }, [te]),\n    pointerGraceTimerRef: z,\n    onPointerGraceIntentChange: E.useCallback(function (e) {\n      H.current = e;\n    }, [])\n  }, /*#__PURE__*/E.createElement(d, {\n    asChild: !0,\n    trapped: i,\n    onMountAutoFocus: M(s, function (e) {\n      var t;\n      e.preventDefault(), null === (t = X.current) || void 0 === t || t.focus();\n    }),\n    onUnmountAutoFocus: l\n  }, /*#__PURE__*/E.createElement(p, {\n    asChild: !0,\n    disableOutsidePointerEvents: f,\n    onEscapeKeyDown: v,\n    onPointerDownOutside: g,\n    onFocusOutside: h,\n    onInteractOutside: x,\n    onDismiss: _\n  }, /*#__PURE__*/E.createElement(o.Root, w({\n    asChild: !0\n  }, K, {\n    dir: S.dir,\n    orientation: \"vertical\",\n    loop: u,\n    currentTabStopId: U,\n    onCurrentTabStopIdChange: V,\n    onEntryFocus: function onEntryFocus(e) {\n      S.isUsingKeyboardRef.current || e.preventDefault();\n    }\n  }), /*#__PURE__*/E.createElement(a.Content, w({\n    role: \"menu\",\n    dir: S.dir,\n    \"data-state\": j(S.open)\n  }, L, D, {\n    ref: B,\n    style: _objectSpread({\n      outline: \"none\"\n    }, D.style),\n    onKeyDown: M(D.onKeyDown, function (e) {\n      var t = e.target,\n          n = e.currentTarget.contains(t),\n          r = e.ctrlKey || e.altKey || e.metaKey;\n      n && !r && 1 === e.key.length && ee(e.key), \"Tab\" === e.key && e.preventDefault();\n      var o = X.current;\n      if (e.target !== o) return;\n      if (!R.includes(e.key)) return;\n      e.preventDefault();\n      var u = G().filter(function (e) {\n        return !e.disabled;\n      }).map(function (e) {\n        return e.ref.current;\n      });\n      b.includes(e.key) && u.reverse(), function (e) {\n        var t = document.activeElement;\n\n        var _iterator = _createForOfIteratorHelper(e),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var _n = _step.value;\n            if (_n === t) return;\n            if (_n.focus(), document.activeElement !== t) return;\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      }(u);\n    }),\n    onBlur: M(e.onBlur, function (e) {\n      e.currentTarget.contains(e.target) || (window.clearTimeout(Y.current), Z.current = \"\");\n    }),\n    onPointerMove: M(e.onPointerMove, J(function (e) {\n      var t = e.target,\n          n = q.current !== e.clientX;\n\n      if (e.currentTarget.contains(t) && n) {\n        var _t = e.clientX > q.current ? \"right\" : \"left\";\n\n        W.current = _t, q.current = e.clientX;\n      }\n    }))\n  }))))))));\n});\nexport var MenuGroup = /*#__PURE__*/E.forwardRef(function (e, t) {\n  var n = e.__scopeMenu,\n      r = _objectWithoutProperties(e, _excluded4);\n  /*#__PURE__*/\n\n\n  return E.createElement(s.div, w({\n    role: \"group\"\n  }, r, {\n    ref: t\n  }));\n});\n/*#__PURE__*/\n\nexport var MenuLabel = /*#__PURE__*/E.forwardRef(function (e, t) {\n  var n = e.__scopeMenu,\n      r = _objectWithoutProperties(e, _excluded5);\n  /*#__PURE__*/\n\n\n  return E.createElement(s.div, w({}, r, {\n    ref: t\n  }));\n});\n/*#__PURE__*/\n\nexport var MenuItem = /*#__PURE__*/E.forwardRef(function (e, t) {\n  var _e$disabled = e.disabled,\n      n = _e$disabled === void 0 ? !1 : _e$disabled,\n      r = e.onSelect,\n      o = _objectWithoutProperties(e, _excluded6),\n      u = E.useRef(null),\n      c = A(\"MenuItem\", e.__scopeMenu),\n      a = K(\"MenuItem\", e.__scopeMenu),\n      i = m(t, u),\n      s = E.useRef(!1);\n  /*#__PURE__*/\n\n\n  return E.createElement(Y, w({}, o, {\n    ref: i,\n    disabled: n,\n    onClick: M(e.onClick, function () {\n      var e = u.current;\n\n      if (!n && e) {\n        var _t2 = new Event(\"menu.itemSelect\", {\n          bubbles: !0,\n          cancelable: !0\n        });\n\n        e.addEventListener(\"menu.itemSelect\", function (e) {\n          return null == r ? void 0 : r(e);\n        }, {\n          once: !0\n        }), e.dispatchEvent(_t2), _t2.defaultPrevented ? s.current = !1 : c.onRootClose();\n      }\n    }),\n    onPointerDown: function onPointerDown(t) {\n      var n;\n      null === (n = e.onPointerDown) || void 0 === n || n.call(e, t), s.current = !0;\n    },\n    onPointerUp: M(e.onPointerUp, function (e) {\n      var t;\n      s.current || null === (t = e.currentTarget) || void 0 === t || t.click();\n    }),\n    onKeyDown: M(e.onKeyDown, function (e) {\n      var t = \"\" !== a.searchRef.current;\n      n || t && \" \" === e.key || x.includes(e.key) && (e.currentTarget.click(), e.preventDefault());\n    })\n  }));\n});\n/*#__PURE__*/\n\nexport var MenuSubTrigger = /*#__PURE__*/E.forwardRef(function (e, t) {\n  var n = A(\"MenuSubTrigger\", e.__scopeMenu),\n      r = K(\"MenuSubTrigger\", e.__scopeMenu),\n      o = E.useRef(null),\n      u = r.pointerGraceTimerRef,\n      c = r.onPointerGraceIntentChange,\n      a = E.useCallback(function () {\n    o.current && window.clearTimeout(o.current), o.current = null;\n  }, []);\n  return E.useEffect(function () {\n    return a;\n  }, [a]), E.useEffect(function () {\n    var e = u.current;\n    return function () {\n      window.clearTimeout(e), c(null);\n    };\n  }, [u, c]), n.isSubmenu ? /*#__PURE__*/E.createElement(MenuAnchor, w({\n    asChild: !0\n  }, e), /*#__PURE__*/E.createElement(Y, w({\n    id: n.triggerId,\n    \"aria-haspopup\": \"menu\",\n    \"aria-expanded\": n.open,\n    \"aria-controls\": n.contentId,\n    \"data-state\": j(n.open)\n  }, e, {\n    ref: v(t, n.onTriggerChange),\n    onClick: function onClick(t) {\n      var r;\n      null === (r = e.onClick) || void 0 === r || r.call(e, t), e.disabled || t.defaultPrevented || (t.currentTarget.focus(), n.open || n.onOpenChange(!0));\n    },\n    onPointerMove: M(e.onPointerMove, J(function (t) {\n      r.onItemEnter(t), t.defaultPrevented || e.disabled || n.open || o.current || (r.onPointerGraceIntentChange(null), o.current = window.setTimeout(function () {\n        n.onOpenChange(!0), a();\n      }, 100));\n    })),\n    onPointerLeave: M(e.onPointerLeave, J(function (e) {\n      var t;\n      a();\n      var o = null === (t = n.content) || void 0 === t ? void 0 : t.getBoundingClientRect();\n\n      if (o) {\n        var c;\n\n        var _t3 = null === (c = n.content) || void 0 === c ? void 0 : c.dataset.side,\n            _a2 = \"right\" === _t3,\n            _i2 = _a2 ? -5 : 5,\n            _s2 = o[_a2 ? \"left\" : \"right\"],\n            _l = o[_a2 ? \"right\" : \"left\"];\n\n        r.onPointerGraceIntentChange({\n          area: [{\n            x: e.clientX + _i2,\n            y: e.clientY\n          }, {\n            x: _s2,\n            y: o.top\n          }, {\n            x: _l,\n            y: o.top\n          }, {\n            x: _l,\n            y: o.bottom\n          }, {\n            x: _s2,\n            y: o.bottom\n          }],\n          side: _t3\n        }), window.clearTimeout(u.current), u.current = window.setTimeout(function () {\n          return r.onPointerGraceIntentChange(null);\n        }, 300);\n      } else {\n        if (r.onTriggerLeave(e), e.defaultPrevented) return;\n        r.onPointerGraceIntentChange(null);\n      }\n    })),\n    onKeyDown: M(e.onKeyDown, function (t) {\n      var o = \"\" !== r.searchRef.current;\n      var u;\n      e.disabled || o && \" \" === t.key || _[n.dir].includes(t.key) && (n.onOpenChange(!0), null === (u = n.content) || void 0 === u || u.focus(), t.preventDefault());\n    })\n  }))) : null;\n});\n/*#__PURE__*/\n\nvar Y = /*#__PURE__*/E.forwardRef(function (e, t) {\n  var n = e.__scopeMenu,\n      _e$disabled2 = e.disabled,\n      r = _e$disabled2 === void 0 ? !1 : _e$disabled2,\n      u = e.textValue,\n      c = _objectWithoutProperties(e, _excluded7),\n      a = K(\"MenuItem\", n),\n      i = T(n),\n      l = E.useRef(null),\n      d = m(t, l),\n      _E$useState9 = E.useState(\"\"),\n      _E$useState10 = _slicedToArray(_E$useState9, 2),\n      p = _E$useState10[0],\n      f = _E$useState10[1];\n\n  return E.useEffect(function () {\n    var e = l.current;\n    var t;\n    e && f((null !== (t = e.textContent) && void 0 !== t ? t : \"\").trim());\n  }, [c.children]), /*#__PURE__*/E.createElement(I.ItemSlot, {\n    scope: n,\n    disabled: r,\n    textValue: null != u ? u : p\n  }, /*#__PURE__*/E.createElement(o.Item, w({\n    asChild: !0\n  }, i, {\n    focusable: !r\n  }), /*#__PURE__*/E.createElement(s.div, w({\n    role: \"menuitem\",\n    \"aria-disabled\": r || void 0,\n    \"data-disabled\": r ? \"\" : void 0\n  }, c, {\n    ref: d,\n    onPointerMove: M(e.onPointerMove, J(function (e) {\n      if (r) a.onItemLeave(e);else if (a.onItemEnter(e), !e.defaultPrevented) {\n        e.currentTarget.focus();\n      }\n    })),\n    onPointerLeave: M(e.onPointerLeave, J(function (e) {\n      return a.onItemLeave(e);\n    }))\n  }))));\n});\nexport var MenuCheckboxItem = /*#__PURE__*/E.forwardRef(function (e, t) {\n  var _e$checked = e.checked,\n      n = _e$checked === void 0 ? !1 : _e$checked,\n      r = e.onCheckedChange,\n      o = _objectWithoutProperties(e, _excluded8);\n  /*#__PURE__*/\n\n\n  return E.createElement(H, {\n    scope: e.__scopeMenu,\n    checked: n\n  }, /*#__PURE__*/E.createElement(MenuItem, w({\n    role: \"menuitemcheckbox\",\n    \"aria-checked\": n\n  }, o, {\n    ref: t,\n    \"data-state\": q(n),\n    onSelect: M(o.onSelect, function () {\n      return null == r ? void 0 : r(!n);\n    }, {\n      checkForDefaultPrevented: !1\n    })\n  })));\n});\n/*#__PURE__*/\n\nvar _D5 = D(\"MenuRadioGroup\", {\n  value: void 0,\n  onValueChange: function onValueChange() {}\n}),\n    _D6 = _slicedToArray(_D5, 2),\n    Z = _D6[0],\n    z = _D6[1];\n\nexport var MenuRadioGroup = /*#__PURE__*/E.forwardRef(function (e, t) {\n  var r = e.value,\n      o = e.onValueChange,\n      u = _objectWithoutProperties(e, _excluded9),\n      c = n(o);\n  /*#__PURE__*/\n\n\n  return E.createElement(Z, {\n    scope: e.__scopeMenu,\n    value: r,\n    onValueChange: c\n  }, /*#__PURE__*/E.createElement(MenuGroup, w({}, u, {\n    ref: t\n  })));\n});\n/*#__PURE__*/\n\nexport var MenuRadioItem = /*#__PURE__*/E.forwardRef(function (e, t) {\n  var n = e.value,\n      r = _objectWithoutProperties(e, _excluded10),\n      o = z(\"MenuRadioItem\", e.__scopeMenu),\n      u = n === o.value;\n  /*#__PURE__*/\n\n\n  return E.createElement(H, {\n    scope: e.__scopeMenu,\n    checked: u\n  }, /*#__PURE__*/E.createElement(MenuItem, w({\n    role: \"menuitemradio\",\n    \"aria-checked\": u\n  }, r, {\n    ref: t,\n    \"data-state\": q(u),\n    onSelect: M(r.onSelect, function () {\n      var e;\n      return null === (e = o.onValueChange) || void 0 === e ? void 0 : e.call(o, n);\n    }, {\n      checkForDefaultPrevented: !1\n    })\n  })));\n});\n/*#__PURE__*/\n\nvar _D7 = D(\"MenuItemIndicator\", {\n  checked: !1\n}),\n    _D8 = _slicedToArray(_D7, 2),\n    H = _D8[0],\n    W = _D8[1];\n\nexport var MenuItemIndicator = /*#__PURE__*/E.forwardRef(function (e, t) {\n  var n = e.__scopeMenu,\n      r = e.forceMount,\n      o = _objectWithoutProperties(e, _excluded11),\n      u = W(\"MenuItemIndicator\", n);\n  /*#__PURE__*/\n\n\n  return E.createElement(l, {\n    present: r || u.checked\n  }, /*#__PURE__*/E.createElement(s.span, w({}, o, {\n    ref: t,\n    \"data-state\": q(u.checked)\n  })));\n});\n/*#__PURE__*/\n\nexport var MenuSeparator = /*#__PURE__*/E.forwardRef(function (e, t) {\n  var n = e.__scopeMenu,\n      r = _objectWithoutProperties(e, _excluded12);\n  /*#__PURE__*/\n\n\n  return E.createElement(s.div, w({\n    role: \"separator\",\n    \"aria-orientation\": \"horizontal\"\n  }, r, {\n    ref: t\n  }));\n});\n/*#__PURE__*/\n\nexport var MenuArrow = /*#__PURE__*/E.forwardRef(function (e, t) {\n  var n = e.__scopeMenu,\n      r = _objectWithoutProperties(e, _excluded13),\n      o = O(n);\n  /*#__PURE__*/\n\n\n  return E.createElement(a.Arrow, w({}, o, r, {\n    ref: t\n  }));\n});\n/*#__PURE__*/\n\nfunction j(e) {\n  return e ? \"open\" : \"closed\";\n}\n\nfunction q(e) {\n  return e ? \"checked\" : \"unchecked\";\n}\n\nfunction J(e) {\n  return function (t) {\n    return \"mouse\" === t.pointerType ? e(t) : void 0;\n  };\n}\n\nexport var Root = Menu;\nexport var Sub = MenuSub;\nexport var Anchor = MenuAnchor;\nexport var SubTrigger = MenuSubTrigger;\nexport var Content = MenuContent;\nexport var Group = MenuGroup;\nexport var Label = MenuLabel;\nexport var Item = MenuItem;\nexport var CheckboxItem = MenuCheckboxItem;\nexport var RadioGroup = MenuRadioGroup;\nexport var RadioItem = MenuRadioItem;\nexport var ItemIndicator = MenuItemIndicator;\nexport var Separator = MenuSeparator;\nexport var Arrow = MenuArrow;","map":{"version":3,"sources":["packages/react/menu/src/Menu.tsx"],"names":["SELECTION_KEYS","LAST_KEYS","FIRST_LAST_KEYS","SUB_OPEN_KEYS","ltr","rtl","SUB_CLOSE_KEYS","Collection","useCollection","createCollectionScope","createCollection","createMenuContext","createMenuScope","createContextScope","createPopperScope","createRovingFocusGroupScope","usePopperScope","useRovingFocusGroupScope","MenuProvider","useMenuContext","Menu","props","__scopeMenu","open","children","onOpenChange","modal","popperScope","content","setContent","React","useState","isUsingKeyboardRef","useRef","handleOpenChange","useCallbackRef","computedDirection","useDirection","dir","useEffect","handleKeyDown","current","handlePointer","document","addEventListener","capture","removeEventListener","_react","_radixUiReactPopper","Root","$e9e2cf92950df0b951e7bac95d18$var$MenuProvider","scope","isSubmenu","onContentChange","onRootClose","useCallback","MenuSub","parentMenuContext","trigger","setTrigger","contentId","useId","onTriggerChange","triggerId","MenuAnchor","forwardRef","forwardedRef","anchorProps","Anchor","ref","MenuContentProvider","useMenuContentContext","MenuContent","forceMount","contentProps","context","$e9e2cf92950df0b951e7bac95d18$var$Collection","Provider","Presence","present","Slot","$e9e2cf92950df0b951e7bac95d18$var$MenuSubContent","$e9e2cf92950df0b951e7bac95d18$var$MenuRootContent","MenuRootContent","$e9e2cf92950df0b951e7bac95d18$var$MenuRootContentModal","$e9e2cf92950df0b951e7bac95d18$var$MenuRootContentNonModal","MenuRootContentModal","composedRefs","useComposedRefs","hideOthers","$e9e2cf92950df0b951e7bac95d18$var$MenuContentImpl","trapFocus","disableOutsidePointerEvents","disableOutsideScroll","onFocusOutside","composeEventHandlers","event","preventDefault","checkForDefaultPrevented","onDismiss","MenuRootContentNonModal","MenuSubContent","id","align","side","portalled","onOpenAutoFocus","focus","onCloseAutoFocus","target","onEscapeKeyDown","onKeyDown","isKeyDownInside","currentTarget","contains","isCloseKey","includes","key","MenuContentImpl","loop","onPointerDownOutside","onInteractOutside","allowPinchZoom","rovingFocusGroupScope","getItems","currentItemId","setCurrentItemId","contentRef","timerRef","searchRef","pointerGraceTimerRef","pointerGraceIntentRef","pointerDirRef","lastPointerXRef","PortalWrapper","Portal","Fragment","ScrollLockWrapper","RemoveScroll","scrollLockWrapperProps","undefined","handleTypeaheadSearch","search","items","filter","item","disabled","currentItem","activeElement","currentMatch","find","textValue","map","nextMatch","getNextMatch","newItem","updateSearch","value","window","clearTimeout","setTimeout","useFocusGuards","isPointerMovingToSubmenu","isPointerInGraceArea","area","$e9e2cf92950df0b951e7bac95d18$var$MenuContentProvider","onItemEnter","onItemLeave","onTriggerLeave","onPointerGraceIntentChange","intent","FocusScope","asChild","trapped","onMountAutoFocus","onUnmountAutoFocus","DismissableLayer","_radixUiReactRovingFocus","orientation","currentTabStopId","onCurrentTabStopIdChange","onEntryFocus","Content","role","getOpenState","style","outline","isModifierKey","ctrlKey","altKey","metaKey","length","candidateNodes","reverse","focusFirst","onBlur","onPointerMove","whenMouse","pointerXHasChanged","clientX","newDir","MenuGroup","groupProps","Primitive","div","MenuLabel","labelProps","MenuItem","onSelect","itemProps","contentContext","isPointerDownRef","menuItem","itemSelectEvent","Event","bubbles","cancelable","once","dispatchEvent","defaultPrevented","$e9e2cf92950df0b951e7bac95d18$var$MenuItemImpl","onClick","onPointerDown","onPointerUp","click","isTypingAhead","MenuSubTrigger","openTimerRef","clearOpenTimer","pointerGraceTimer","composeRefs","onPointerLeave","contentRect","getBoundingClientRect","dataset","rightSide","bleed","contentNearEdge","contentFarEdge","x","y","clientY","top","bottom","MenuItemImpl","textContent","setTextContent","trim","ItemSlot","Item","focusable","MenuCheckboxItem","checked","onCheckedChange","checkboxItemProps","$e9e2cf92950df0b951e7bac95d18$var$ItemIndicatorProvider","getCheckedState","RadioGroupProvider","useRadioGroupContext","onValueChange","MenuRadioGroup","handleValueChange","$e9e2cf92950df0b951e7bac95d18$var$RadioGroupProvider","MenuRadioItem","radioItemProps","ItemIndicatorProvider","useItemIndicatorContext","MenuItemIndicator","itemIndicatorProps","indicatorContext","span","MenuSeparator","separatorProps","MenuArrow","arrowProps","Arrow","candidates","PREVIOUSLY_FOCUSED_ELEMENT","candidate","array","startIndex","_","index","values","Array","from","every","char","normalizedSearch","currentMatchIndex","indexOf","wrappedValues","Math","max","v","toLowerCase","startsWith","point","polygon","inside","i","j","xi","yi","xj","yj","isPointInPolygon","handler","pointerType","Sub","SubTrigger","Group","Label","CheckboxItem","RadioGroup","RadioItem","ItemIndicator","Separator"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { RemoveScroll } from 'react-remove-scroll';\nimport { hideOthers } from 'aria-hidden';\nimport { composeEventHandlers } from '@radix-ui/primitive';\nimport { createCollection } from '@radix-ui/react-collection';\nimport { useComposedRefs, composeRefs } from '@radix-ui/react-compose-refs';\nimport { createContextScope } from '@radix-ui/react-context';\nimport { DismissableLayer } from '@radix-ui/react-dismissable-layer';\nimport { FocusScope } from '@radix-ui/react-focus-scope';\nimport { Presence } from '@radix-ui/react-presence';\nimport { Primitive } from '@radix-ui/react-primitive';\nimport * as PopperPrimitive from '@radix-ui/react-popper';\nimport { createPopperScope } from '@radix-ui/react-popper';\nimport { Portal } from '@radix-ui/react-portal';\nimport * as RovingFocusGroup from '@radix-ui/react-roving-focus';\nimport { createRovingFocusGroupScope } from '@radix-ui/react-roving-focus';\nimport { useDirection } from '@radix-ui/react-use-direction';\nimport { useCallbackRef } from '@radix-ui/react-use-callback-ref';\nimport { useFocusGuards } from '@radix-ui/react-focus-guards';\nimport { useId } from '@radix-ui/react-id';\n\nimport type * as Radix from '@radix-ui/react-primitive';\nimport type { Scope } from '@radix-ui/react-context';\n\ntype Direction = 'ltr' | 'rtl';\n\nconst SELECTION_KEYS = ['Enter', ' '];\nconst FIRST_KEYS = ['ArrowDown', 'PageUp', 'Home'];\nconst LAST_KEYS = ['ArrowUp', 'PageDown', 'End'];\nconst FIRST_LAST_KEYS = [...FIRST_KEYS, ...LAST_KEYS];\nconst SUB_OPEN_KEYS: Record<Direction, string[]> = {\n  ltr: [...SELECTION_KEYS, 'ArrowRight'],\n  rtl: [...SELECTION_KEYS, 'ArrowLeft'],\n};\nconst SUB_CLOSE_KEYS: Record<Direction, string[]> = {\n  ltr: ['ArrowLeft'],\n  rtl: ['ArrowRight'],\n};\n\n/* -------------------------------------------------------------------------------------------------\n * Menu\n * -----------------------------------------------------------------------------------------------*/\n\nconst MENU_NAME = 'Menu';\n\ntype ItemData = { disabled: boolean; textValue: string };\nconst [Collection, useCollection, createCollectionScope] = createCollection<\n  MenuItemElement,\n  ItemData\n>(MENU_NAME);\n\ntype ScopedProps<P> = P & { __scopeMenu?: Scope };\nconst [createMenuContext, createMenuScope] = createContextScope(MENU_NAME, [\n  createCollectionScope,\n  createPopperScope,\n  createRovingFocusGroupScope,\n]);\nconst usePopperScope = createPopperScope();\nconst useRovingFocusGroupScope = createRovingFocusGroupScope();\n\ntype MenuRootContextValue = {\n  isSubmenu: false;\n  isUsingKeyboardRef: React.RefObject<boolean>;\n  dir: Direction;\n  open: boolean;\n  onOpenChange(open: boolean): void;\n  content: MenuContentElement | null;\n  onContentChange(content: MenuContentElement | null): void;\n  onRootClose(): void;\n  modal: boolean;\n};\n\ntype MenuSubContextValue = Omit<MenuRootContextValue, 'isSubmenu'> & {\n  isSubmenu: true;\n  contentId: string;\n  triggerId: string;\n  trigger: MenuSubTriggerElement | null;\n  onTriggerChange(trigger: MenuSubTriggerElement | null): void;\n};\n\nconst [MenuProvider, useMenuContext] = createMenuContext<\n  MenuRootContextValue | MenuSubContextValue\n>(MENU_NAME);\n\ninterface MenuProps {\n  open?: boolean;\n  onOpenChange?(open: boolean): void;\n  dir?: Direction;\n  modal?: boolean;\n  children?: React.ReactNode;\n}\n\nconst Menu: React.FC<MenuProps> = (props: ScopedProps<MenuProps>) => {\n  const { __scopeMenu, open = false, children, onOpenChange, modal = true } = props;\n  const popperScope = usePopperScope(__scopeMenu);\n  const [content, setContent] = React.useState<MenuContentElement | null>(null);\n  const isUsingKeyboardRef = React.useRef(false);\n  const handleOpenChange = useCallbackRef(onOpenChange);\n  const computedDirection = useDirection(content, props.dir);\n\n  React.useEffect(() => {\n    const handleKeyDown = () => (isUsingKeyboardRef.current = true);\n    const handlePointer = () => (isUsingKeyboardRef.current = false);\n    // Capture phase ensures we set the boolean before any side effects execute\n    // in response to the key or pointer event as they might depend on this value.\n    document.addEventListener('keydown', handleKeyDown, { capture: true });\n    document.addEventListener('pointerdown', handlePointer, { capture: true });\n    document.addEventListener('pointermove', handlePointer, { capture: true });\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown, { capture: true });\n      document.removeEventListener('pointerdown', handlePointer, { capture: true });\n      document.removeEventListener('pointermove', handlePointer, { capture: true });\n    };\n  }, []);\n\n  return (\n    <PopperPrimitive.Root {...popperScope}>\n      <MenuProvider\n        scope={__scopeMenu}\n        isSubmenu={false}\n        isUsingKeyboardRef={isUsingKeyboardRef}\n        dir={computedDirection}\n        open={open}\n        onOpenChange={handleOpenChange}\n        content={content}\n        onContentChange={setContent}\n        onRootClose={React.useCallback(() => handleOpenChange(false), [handleOpenChange])}\n        modal={modal}\n      >\n        {children}\n      </MenuProvider>\n    </PopperPrimitive.Root>\n  );\n};\n\nMenu.displayName = MENU_NAME;\n\n/* ---------------------------------------------------------------------------------------------- */\n\nconst SUB_NAME = 'MenuSub';\n\ninterface MenuSubProps {\n  open?: boolean;\n  onOpenChange?(open: boolean): void;\n  children?: React.ReactNode;\n}\n\nconst MenuSub: React.FC<MenuSubProps> = (props: ScopedProps<MenuSubProps>) => {\n  const { __scopeMenu, children, open = false, onOpenChange } = props;\n  const parentMenuContext = useMenuContext(SUB_NAME, __scopeMenu);\n  const popperScope = usePopperScope(__scopeMenu);\n  const [trigger, setTrigger] = React.useState<MenuSubTriggerElement | null>(null);\n  const [content, setContent] = React.useState<MenuContentElement | null>(null);\n  const handleOpenChange = useCallbackRef(onOpenChange);\n\n  // Prevent the parent menu from reopening with open submenus.\n  React.useEffect(() => {\n    if (parentMenuContext.open === false) handleOpenChange(false);\n    return () => handleOpenChange(false);\n  }, [parentMenuContext.open, handleOpenChange]);\n\n  return (\n    <PopperPrimitive.Root {...popperScope}>\n      <MenuProvider\n        scope={__scopeMenu}\n        isSubmenu={true}\n        isUsingKeyboardRef={parentMenuContext.isUsingKeyboardRef}\n        dir={parentMenuContext.dir}\n        open={open}\n        onOpenChange={handleOpenChange}\n        content={content}\n        onContentChange={setContent}\n        onRootClose={parentMenuContext.onRootClose}\n        contentId={useId()}\n        trigger={trigger}\n        onTriggerChange={setTrigger}\n        triggerId={useId()}\n        modal={false}\n      >\n        {children}\n      </MenuProvider>\n    </PopperPrimitive.Root>\n  );\n};\n\nMenuSub.displayName = SUB_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuAnchor\n * -----------------------------------------------------------------------------------------------*/\n\nconst ANCHOR_NAME = 'MenuAnchor';\n\ntype MenuAnchorElement = React.ElementRef<typeof PopperPrimitive.Anchor>;\ntype PopperAnchorProps = Radix.ComponentPropsWithoutRef<typeof PopperPrimitive.Anchor>;\ninterface MenuAnchorProps extends PopperAnchorProps {}\n\nconst MenuAnchor = React.forwardRef<MenuAnchorElement, MenuAnchorProps>(\n  (props: ScopedProps<MenuAnchorProps>, forwardedRef) => {\n    const { __scopeMenu, ...anchorProps } = props;\n    const popperScope = usePopperScope(__scopeMenu);\n    return <PopperPrimitive.Anchor {...popperScope} {...anchorProps} ref={forwardedRef} />;\n  }\n);\n\nMenuAnchor.displayName = ANCHOR_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuContent\n * -----------------------------------------------------------------------------------------------*/\n\nconst CONTENT_NAME = 'MenuContent';\n\ntype MenuContentContextValue = {\n  onItemEnter(event: React.PointerEvent): void;\n  onItemLeave(event: React.PointerEvent): void;\n  onTriggerLeave(event: React.PointerEvent): void;\n  searchRef: React.RefObject<string>;\n  pointerGraceTimerRef: React.MutableRefObject<number>;\n  onPointerGraceIntentChange(intent: GraceIntent | null): void;\n};\nconst [MenuContentProvider, useMenuContentContext] =\n  createMenuContext<MenuContentContextValue>(CONTENT_NAME);\n\ntype MenuContentElement = MenuRootContentElement | MenuSubContentElement;\n/**\n * We purposefully don't union MenuRootContent and MenuSubContent props here because\n * they have conflicting prop types. We agreed that we would allow MenuSubContent to\n * accept props that it would just ignore.\n */\ninterface MenuContentProps extends MenuRootContentProps {\n  /**\n   * Used to force mounting when more control is needed. Useful when\n   * controlling animation with React animation libraries.\n   */\n  forceMount?: true;\n}\n\nconst MenuContent = React.forwardRef<MenuContentElement, MenuContentProps>(\n  (props: ScopedProps<MenuContentProps>, forwardedRef) => {\n    const { forceMount, ...contentProps } = props;\n    const context = useMenuContext(CONTENT_NAME, props.__scopeMenu);\n    return (\n      <Collection.Provider scope={props.__scopeMenu}>\n        <Presence present={forceMount || context.open}>\n          <Collection.Slot scope={props.__scopeMenu}>\n            {context.isSubmenu ? (\n              <MenuSubContent {...contentProps} ref={forwardedRef} />\n            ) : (\n              <MenuRootContent {...contentProps} ref={forwardedRef} />\n            )}\n          </Collection.Slot>\n        </Presence>\n      </Collection.Provider>\n    );\n  }\n);\n\n/* ---------------------------------------------------------------------------------------------- */\n\ntype MenuRootContentElement = MenuRootContentTypeElement;\ninterface MenuRootContentProps\n  extends Omit<MenuRootContentTypeProps, keyof MenuContentImplPrivateProps> {}\n\nconst MenuRootContent = React.forwardRef<MenuRootContentElement, MenuRootContentProps>(\n  (props: ScopedProps<MenuRootContentProps>, forwardedRef) => {\n    const context = useMenuContext(CONTENT_NAME, props.__scopeMenu);\n    return context.modal ? (\n      <MenuRootContentModal {...props} ref={forwardedRef} />\n    ) : (\n      <MenuRootContentNonModal {...props} ref={forwardedRef} />\n    );\n  }\n);\n\ntype MenuRootContentTypeElement = MenuContentImplElement;\ninterface MenuRootContentTypeProps\n  extends Omit<\n    MenuContentImplProps,\n    'trapFocus' | 'disableOutsidePointerEvents' | 'disableOutsideScroll'\n  > {}\n\nconst MenuRootContentModal = React.forwardRef<MenuRootContentTypeElement, MenuRootContentTypeProps>(\n  (props: ScopedProps<MenuRootContentTypeProps>, forwardedRef) => {\n    const context = useMenuContext(CONTENT_NAME, props.__scopeMenu);\n    const ref = React.useRef<MenuRootContentTypeElement>(null);\n    const composedRefs = useComposedRefs(forwardedRef, ref);\n\n    // Hide everything from ARIA except the `MenuContent`\n    React.useEffect(() => {\n      const content = ref.current;\n      if (content) return hideOthers(content);\n    }, []);\n\n    return (\n      <MenuContentImpl\n        {...props}\n        ref={composedRefs}\n        // we make sure we're not trapping once it's been closed\n        // (closed !== unmounted when animating out)\n        trapFocus={context.open}\n        // make sure to only disable pointer events when open\n        // this avoids blocking interactions while animating out\n        disableOutsidePointerEvents={context.open}\n        disableOutsideScroll\n        // When focus is trapped, a `focusout` event may still happen.\n        // We make sure we don't trigger our `onDismiss` in such case.\n        onFocusOutside={composeEventHandlers(\n          props.onFocusOutside,\n          (event) => event.preventDefault(),\n          { checkForDefaultPrevented: false }\n        )}\n        onDismiss={() => context.onOpenChange(false)}\n      />\n    );\n  }\n);\n\nconst MenuRootContentNonModal = React.forwardRef<\n  MenuRootContentTypeElement,\n  MenuRootContentTypeProps\n>((props: ScopedProps<MenuRootContentTypeProps>, forwardedRef) => {\n  const context = useMenuContext(CONTENT_NAME, props.__scopeMenu);\n  return (\n    <MenuContentImpl\n      {...props}\n      ref={forwardedRef}\n      trapFocus={false}\n      disableOutsidePointerEvents={false}\n      disableOutsideScroll={false}\n      onDismiss={() => context.onOpenChange(false)}\n    />\n  );\n});\n\n/* ---------------------------------------------------------------------------------------------- */\n\ntype MenuSubContentElement = MenuContentImplElement;\ninterface MenuSubContentProps\n  extends Omit<\n    MenuContentImplProps,\n    | keyof MenuContentImplPrivateProps\n    | 'align'\n    | 'side'\n    | 'portalled'\n    | 'disabledOutsidePointerEvents'\n    | 'disableOutsideScroll'\n    | 'trapFocus'\n    | 'onCloseAutoFocus'\n  > {}\n\nconst MenuSubContent = React.forwardRef<MenuSubContentElement, MenuSubContentProps>(\n  (props: ScopedProps<MenuSubContentProps>, forwardedRef) => {\n    const context = useMenuContext(CONTENT_NAME, props.__scopeMenu);\n    const ref = React.useRef<MenuSubContentElement>(null);\n    const composedRefs = useComposedRefs(forwardedRef, ref);\n    return context.isSubmenu ? (\n      <MenuContentImpl\n        id={context.contentId}\n        aria-labelledby={context.triggerId}\n        {...props}\n        ref={composedRefs}\n        align=\"start\"\n        side={context.dir === 'rtl' ? 'left' : 'right'}\n        portalled\n        disableOutsidePointerEvents={false}\n        disableOutsideScroll={false}\n        trapFocus={false}\n        onOpenAutoFocus={(event) => {\n          // when opening a submenu, focus content for keyboard users only\n          if (context.isUsingKeyboardRef.current) ref.current?.focus();\n          event.preventDefault();\n        }}\n        // The menu might close because of focusing another menu item in the parent menu. We\n        // don't want it to refocus the trigger in that case so we handle trigger focus ourselves.\n        onCloseAutoFocus={(event) => event.preventDefault()}\n        onFocusOutside={composeEventHandlers(props.onFocusOutside, (event) => {\n          // We prevent closing when the trigger is focused to avoid triggering a re-open animation\n          // on pointer interaction.\n          if (event.target !== context.trigger) context.onOpenChange(false);\n        })}\n        onEscapeKeyDown={composeEventHandlers(props.onEscapeKeyDown, context.onRootClose)}\n        onKeyDown={composeEventHandlers(props.onKeyDown, (event) => {\n          // Submenu key events bubble through portals. We only care about keys in this menu.\n          const isKeyDownInside = event.currentTarget.contains(event.target as HTMLElement);\n          const isCloseKey = SUB_CLOSE_KEYS[context.dir].includes(event.key);\n          if (isKeyDownInside && isCloseKey) {\n            context.onOpenChange(false);\n            // We focus manually because we prevented it in `onCloseAutoFocus`\n            context.trigger?.focus();\n            // prevent window from scrolling\n            event.preventDefault();\n          }\n        })}\n      />\n    ) : null;\n  }\n);\n\n/* ---------------------------------------------------------------------------------------------- */\n\ntype RemoveScrollProps = React.ComponentProps<typeof RemoveScroll>;\ntype MenuContentImplElement = React.ElementRef<typeof PopperPrimitive.Content>;\ntype FocusScopeProps = Radix.ComponentPropsWithoutRef<typeof FocusScope>;\ntype DismissableLayerProps = Radix.ComponentPropsWithoutRef<typeof DismissableLayer>;\ntype RovingFocusGroupProps = Radix.ComponentPropsWithoutRef<typeof RovingFocusGroup.Root>;\ntype PopperContentProps = Radix.ComponentPropsWithoutRef<typeof PopperPrimitive.Content>;\ntype MenuContentImplPrivateProps = {\n  onOpenAutoFocus?: FocusScopeProps['onMountAutoFocus'];\n  onDismiss?: DismissableLayerProps['onDismiss'];\n};\ninterface MenuContentImplProps\n  extends MenuContentImplPrivateProps,\n    PopperContentProps,\n    Omit<DismissableLayerProps, 'onDismiss'> {\n  /**\n   * Whether focus should be trapped within the `MenuContent`\n   * (default: false)\n   */\n  trapFocus?: FocusScopeProps['trapped'];\n\n  /**\n   * Event handler called when auto-focusing on close.\n   * Can be prevented.\n   */\n  onCloseAutoFocus?: FocusScopeProps['onUnmountAutoFocus'];\n\n  /**\n   * @see https://github.com/theKashey/react-remove-scroll#usage\n   */\n  allowPinchZoom?: RemoveScrollProps['allowPinchZoom'];\n\n  /**\n   * Whether scrolling outside the `MenuContent` should be prevented\n   * (default: `false`)\n   */\n  disableOutsideScroll?: boolean;\n\n  /**\n   * The direction of navigation between menu items.\n   * @defaultValue ltr\n   */\n  dir?: RovingFocusGroupProps['dir'];\n\n  /**\n   * Whether keyboard navigation should loop around\n   * @defaultValue false\n   */\n  loop?: RovingFocusGroupProps['loop'];\n\n  /**\n   * Whether the `MenuContent` should render in a `Portal`\n   * (default: `true`)\n   */\n  portalled?: boolean;\n}\n\nconst MenuContentImpl = React.forwardRef<MenuContentImplElement, MenuContentImplProps>(\n  (props: ScopedProps<MenuContentImplProps>, forwardedRef) => {\n    const {\n      __scopeMenu,\n      loop = false,\n      trapFocus,\n      onOpenAutoFocus,\n      onCloseAutoFocus,\n      disableOutsidePointerEvents,\n      onEscapeKeyDown,\n      onPointerDownOutside,\n      onFocusOutside,\n      onInteractOutside,\n      onDismiss,\n      disableOutsideScroll,\n      allowPinchZoom,\n      portalled,\n      ...contentProps\n    } = props;\n    const context = useMenuContext(CONTENT_NAME, __scopeMenu);\n    const popperScope = usePopperScope(__scopeMenu);\n    const rovingFocusGroupScope = useRovingFocusGroupScope(__scopeMenu);\n    const getItems = useCollection(__scopeMenu);\n    const [currentItemId, setCurrentItemId] = React.useState<string | null>(null);\n    const contentRef = React.useRef<HTMLDivElement>(null);\n    const composedRefs = useComposedRefs(forwardedRef, contentRef, context.onContentChange);\n    const timerRef = React.useRef(0);\n    const searchRef = React.useRef('');\n    const pointerGraceTimerRef = React.useRef(0);\n    const pointerGraceIntentRef = React.useRef<GraceIntent | null>(null);\n    const pointerDirRef = React.useRef<Side>('right');\n    const lastPointerXRef = React.useRef(0);\n\n    const PortalWrapper = portalled ? Portal : React.Fragment;\n    const ScrollLockWrapper = disableOutsideScroll ? RemoveScroll : React.Fragment;\n    const scrollLockWrapperProps = disableOutsideScroll ? { allowPinchZoom } : undefined;\n\n    const handleTypeaheadSearch = (key: string) => {\n      const search = searchRef.current + key;\n      const items = getItems().filter((item) => !item.disabled);\n      const currentItem = document.activeElement;\n      const currentMatch = items.find((item) => item.ref.current === currentItem)?.textValue;\n      const values = items.map((item) => item.textValue);\n      const nextMatch = getNextMatch(values, search, currentMatch);\n      const newItem = items.find((item) => item.textValue === nextMatch)?.ref.current;\n\n      // Reset `searchRef` 1 second after it was last updated\n      (function updateSearch(value: string) {\n        searchRef.current = value;\n        window.clearTimeout(timerRef.current);\n        if (value !== '') timerRef.current = window.setTimeout(() => updateSearch(''), 1000);\n      })(search);\n\n      if (newItem) {\n        /**\n         * Imperative focus during keydown is risky so we prevent React's batching updates\n         * to avoid potential bugs. See: https://github.com/facebook/react/issues/20332\n         */\n        setTimeout(() => (newItem as HTMLElement).focus());\n      }\n    };\n\n    React.useEffect(() => {\n      return () => window.clearTimeout(timerRef.current);\n    }, []);\n\n    // Make sure the whole tree has focus guards as our `MenuContent` may be\n    // the last element in the DOM (beacuse of the `Portal`)\n    useFocusGuards();\n\n    const isPointerMovingToSubmenu = React.useCallback((event: React.PointerEvent) => {\n      const isMovingTowards = pointerDirRef.current === pointerGraceIntentRef.current?.side;\n      return isMovingTowards && isPointerInGraceArea(event, pointerGraceIntentRef.current?.area);\n    }, []);\n\n    return (\n      <PortalWrapper>\n        <ScrollLockWrapper {...scrollLockWrapperProps}>\n          <MenuContentProvider\n            scope={__scopeMenu}\n            searchRef={searchRef}\n            onItemEnter={React.useCallback(\n              (event) => {\n                if (isPointerMovingToSubmenu(event)) event.preventDefault();\n              },\n              [isPointerMovingToSubmenu]\n            )}\n            onItemLeave={React.useCallback(\n              (event) => {\n                if (isPointerMovingToSubmenu(event)) return;\n                contentRef.current?.focus();\n                setCurrentItemId(null);\n              },\n              [isPointerMovingToSubmenu]\n            )}\n            onTriggerLeave={React.useCallback(\n              (event) => {\n                if (isPointerMovingToSubmenu(event)) event.preventDefault();\n              },\n              [isPointerMovingToSubmenu]\n            )}\n            pointerGraceTimerRef={pointerGraceTimerRef}\n            onPointerGraceIntentChange={React.useCallback((intent) => {\n              pointerGraceIntentRef.current = intent;\n            }, [])}\n          >\n            <FocusScope\n              asChild\n              trapped={trapFocus}\n              onMountAutoFocus={composeEventHandlers(onOpenAutoFocus, (event) => {\n                // when opening, explicitly focus the content area only and leave\n                // `onEntryFocus` in  control of focusing first item\n                event.preventDefault();\n                contentRef.current?.focus();\n              })}\n              onUnmountAutoFocus={onCloseAutoFocus}\n            >\n              <DismissableLayer\n                asChild\n                disableOutsidePointerEvents={disableOutsidePointerEvents}\n                onEscapeKeyDown={onEscapeKeyDown}\n                onPointerDownOutside={onPointerDownOutside}\n                onFocusOutside={onFocusOutside}\n                onInteractOutside={onInteractOutside}\n                onDismiss={onDismiss}\n              >\n                <RovingFocusGroup.Root\n                  asChild\n                  {...rovingFocusGroupScope}\n                  dir={context.dir}\n                  orientation=\"vertical\"\n                  loop={loop}\n                  currentTabStopId={currentItemId}\n                  onCurrentTabStopIdChange={setCurrentItemId}\n                  onEntryFocus={(event) => {\n                    // only focus first item when using keyboard\n                    if (!context.isUsingKeyboardRef.current) event.preventDefault();\n                  }}\n                >\n                  <PopperPrimitive.Content\n                    role=\"menu\"\n                    dir={context.dir}\n                    data-state={getOpenState(context.open)}\n                    {...popperScope}\n                    {...contentProps}\n                    ref={composedRefs}\n                    style={{ outline: 'none', ...contentProps.style }}\n                    onKeyDown={composeEventHandlers(contentProps.onKeyDown, (event) => {\n                      // submenu key events bubble through portals. We only care about keys in this menu.\n                      const target = event.target as HTMLElement;\n                      const isKeyDownInside = event.currentTarget.contains(target);\n                      const isModifierKey = event.ctrlKey || event.altKey || event.metaKey;\n                      if (isKeyDownInside && !isModifierKey && event.key.length === 1) {\n                        handleTypeaheadSearch(event.key);\n                      }\n                      // menus should not be navigated using tab key so we prevent it\n                      if (event.key === 'Tab') event.preventDefault();\n                      // focus first/last item based on key pressed\n                      const content = contentRef.current;\n                      if (event.target !== content) return;\n                      if (!FIRST_LAST_KEYS.includes(event.key)) return;\n                      event.preventDefault();\n                      const items = getItems().filter((item) => !item.disabled);\n                      const candidateNodes = items.map((item) => item.ref.current!);\n                      if (LAST_KEYS.includes(event.key)) candidateNodes.reverse();\n                      focusFirst(candidateNodes);\n                    })}\n                    onBlur={composeEventHandlers(props.onBlur, (event) => {\n                      // clear search buffer when leaving the menu\n                      if (!event.currentTarget.contains(event.target)) {\n                        window.clearTimeout(timerRef.current);\n                        searchRef.current = '';\n                      }\n                    })}\n                    onPointerMove={composeEventHandlers(\n                      props.onPointerMove,\n                      whenMouse((event) => {\n                        const target = event.target as HTMLElement;\n                        const pointerXHasChanged = lastPointerXRef.current !== event.clientX;\n\n                        // We don't use `event.movementX` for this check because Safari will\n                        // always return `0` on a pointer event.\n                        if (event.currentTarget.contains(target) && pointerXHasChanged) {\n                          const newDir = event.clientX > lastPointerXRef.current ? 'right' : 'left';\n                          pointerDirRef.current = newDir;\n                          lastPointerXRef.current = event.clientX;\n                        }\n                      })\n                    )}\n                  />\n                </RovingFocusGroup.Root>\n              </DismissableLayer>\n            </FocusScope>\n          </MenuContentProvider>\n        </ScrollLockWrapper>\n      </PortalWrapper>\n    );\n  }\n);\n\nMenuContent.displayName = CONTENT_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuGroup\n * -----------------------------------------------------------------------------------------------*/\n\nconst GROUP_NAME = 'MenuGroup';\n\ntype MenuGroupElement = React.ElementRef<typeof Primitive.div>;\ntype PrimitiveDivProps = Radix.ComponentPropsWithoutRef<typeof Primitive.div>;\ninterface MenuGroupProps extends PrimitiveDivProps {}\n\nconst MenuGroup = React.forwardRef<MenuGroupElement, MenuGroupProps>(\n  (props: ScopedProps<MenuGroupProps>, forwardedRef) => {\n    const { __scopeMenu, ...groupProps } = props;\n    return <Primitive.div role=\"group\" {...groupProps} ref={forwardedRef} />;\n  }\n);\n\nMenuGroup.displayName = GROUP_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuLabel\n * -----------------------------------------------------------------------------------------------*/\n\nconst LABEL_NAME = 'MenuLabel';\n\ntype MenuLabelElement = React.ElementRef<typeof Primitive.div>;\ninterface MenuLabelProps extends PrimitiveDivProps {}\n\nconst MenuLabel = React.forwardRef<MenuLabelElement, MenuLabelProps>(\n  (props: ScopedProps<MenuLabelProps>, forwardedRef) => {\n    const { __scopeMenu, ...labelProps } = props;\n    return <Primitive.div {...labelProps} ref={forwardedRef} />;\n  }\n);\n\nMenuLabel.displayName = LABEL_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuItem\n * -----------------------------------------------------------------------------------------------*/\n\nconst ITEM_NAME = 'MenuItem';\nconst ITEM_SELECT = 'menu.itemSelect';\n\ntype MenuItemElement = MenuItemImplElement;\ninterface MenuItemProps extends Omit<MenuItemImplProps, 'onSelect'> {\n  onSelect?: (event: Event) => void;\n}\n\nconst MenuItem = React.forwardRef<MenuItemElement, MenuItemProps>(\n  (props: ScopedProps<MenuItemProps>, forwardedRef) => {\n    const { disabled = false, onSelect, ...itemProps } = props;\n    const ref = React.useRef<HTMLDivElement>(null);\n    const context = useMenuContext(ITEM_NAME, props.__scopeMenu);\n    const contentContext = useMenuContentContext(ITEM_NAME, props.__scopeMenu);\n    const composedRefs = useComposedRefs(forwardedRef, ref);\n    const isPointerDownRef = React.useRef(false);\n\n    const handleSelect = () => {\n      const menuItem = ref.current;\n      if (!disabled && menuItem) {\n        const itemSelectEvent = new Event(ITEM_SELECT, { bubbles: true, cancelable: true });\n        menuItem.addEventListener(ITEM_SELECT, (event) => onSelect?.(event), { once: true });\n        menuItem.dispatchEvent(itemSelectEvent);\n        if (itemSelectEvent.defaultPrevented) {\n          isPointerDownRef.current = false;\n        } else {\n          context.onRootClose();\n        }\n      }\n    };\n\n    return (\n      <MenuItemImpl\n        {...itemProps}\n        ref={composedRefs}\n        disabled={disabled}\n        onClick={composeEventHandlers(props.onClick, handleSelect)}\n        onPointerDown={(event) => {\n          props.onPointerDown?.(event);\n          isPointerDownRef.current = true;\n        }}\n        onPointerUp={composeEventHandlers(props.onPointerUp, (event) => {\n          // Pointer down can move to a different menu item which should activate it on pointer up.\n          // We dispatch a click for selection to allow composition with click based triggers and to\n          // prevent Firefox from getting stuck in text selection mode when the menu closes.\n          if (!isPointerDownRef.current) event.currentTarget?.click();\n        })}\n        onKeyDown={composeEventHandlers(props.onKeyDown, (event) => {\n          const isTypingAhead = contentContext.searchRef.current !== '';\n          if (disabled || (isTypingAhead && event.key === ' ')) return;\n          if (SELECTION_KEYS.includes(event.key)) {\n            event.currentTarget.click();\n            /**\n             * We prevent default browser behaviour for selection keys as they should trigger\n             * a selection only:\n             * - prevents space from scrolling the page.\n             * - if keydown causes focus to move, prevents keydown from firing on the new target.\n             */\n            event.preventDefault();\n          }\n        })}\n      />\n    );\n  }\n);\n\nMenuItem.displayName = ITEM_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuSubTrigger\n * -----------------------------------------------------------------------------------------------*/\n\nconst SUB_TRIGGER_NAME = 'MenuSubTrigger';\n\ntype MenuSubTriggerElement = MenuItemImplElement;\ninterface MenuSubTriggerProps extends MenuItemImplProps {}\n\nconst MenuSubTrigger = React.forwardRef<MenuSubTriggerElement, MenuSubTriggerProps>(\n  (props: ScopedProps<MenuSubTriggerProps>, forwardedRef) => {\n    const context = useMenuContext(SUB_TRIGGER_NAME, props.__scopeMenu);\n    const contentContext = useMenuContentContext(SUB_TRIGGER_NAME, props.__scopeMenu);\n    const openTimerRef = React.useRef<number | null>(null);\n    const { pointerGraceTimerRef, onPointerGraceIntentChange } = contentContext;\n\n    const clearOpenTimer = React.useCallback(() => {\n      if (openTimerRef.current) window.clearTimeout(openTimerRef.current);\n      openTimerRef.current = null;\n    }, []);\n\n    React.useEffect(() => clearOpenTimer, [clearOpenTimer]);\n\n    React.useEffect(() => {\n      const pointerGraceTimer = pointerGraceTimerRef.current;\n      return () => {\n        window.clearTimeout(pointerGraceTimer);\n        onPointerGraceIntentChange(null);\n      };\n    }, [pointerGraceTimerRef, onPointerGraceIntentChange]);\n\n    return context.isSubmenu ? (\n      <MenuAnchor asChild {...props}>\n        <MenuItemImpl\n          id={context.triggerId}\n          aria-haspopup=\"menu\"\n          aria-expanded={context.open}\n          aria-controls={context.contentId}\n          data-state={getOpenState(context.open)}\n          {...props}\n          ref={composeRefs(forwardedRef, context.onTriggerChange)}\n          // This is redundant for mouse users but we cannot determine pointer type from\n          // click event and we cannot use pointerup event (see git history for reasons why)\n          onClick={(event) => {\n            props.onClick?.(event);\n            if (props.disabled || event.defaultPrevented) return;\n            /**\n             * We manually focus because iOS Safari doesn't always focus on click (e.g. buttons)\n             * and we rely heavily on `onFocusOutside` for submenus to close when switching\n             * between separate submenus.\n             */\n            event.currentTarget.focus();\n            if (!context.open) context.onOpenChange(true);\n          }}\n          onPointerMove={composeEventHandlers(\n            props.onPointerMove,\n            whenMouse((event) => {\n              contentContext.onItemEnter(event);\n              if (event.defaultPrevented) return;\n              if (!props.disabled && !context.open && !openTimerRef.current) {\n                contentContext.onPointerGraceIntentChange(null);\n                openTimerRef.current = window.setTimeout(() => {\n                  context.onOpenChange(true);\n                  clearOpenTimer();\n                }, 100);\n              }\n            })\n          )}\n          onPointerLeave={composeEventHandlers(\n            props.onPointerLeave,\n            whenMouse((event) => {\n              clearOpenTimer();\n\n              const contentRect = context.content?.getBoundingClientRect();\n              if (contentRect) {\n                // TODO: make sure to update this when we change positioning logic\n                const side = context.content?.dataset.side as Side;\n                const rightSide = side === 'right';\n                const bleed = rightSide ? -5 : +5;\n                const contentNearEdge = contentRect[rightSide ? 'left' : 'right'];\n                const contentFarEdge = contentRect[rightSide ? 'right' : 'left'];\n\n                contentContext.onPointerGraceIntentChange({\n                  area: [\n                    // Apply a bleed on clientX to ensure that our exit point is\n                    // consistently within polygon bounds\n                    { x: event.clientX + bleed, y: event.clientY },\n                    { x: contentNearEdge, y: contentRect.top },\n                    { x: contentFarEdge, y: contentRect.top },\n                    { x: contentFarEdge, y: contentRect.bottom },\n                    { x: contentNearEdge, y: contentRect.bottom },\n                  ],\n                  side,\n                });\n\n                window.clearTimeout(pointerGraceTimerRef.current);\n                pointerGraceTimerRef.current = window.setTimeout(\n                  () => contentContext.onPointerGraceIntentChange(null),\n                  300\n                );\n              } else {\n                contentContext.onTriggerLeave(event);\n                if (event.defaultPrevented) return;\n\n                // There's 100ms where the user may leave an item before the submenu was opened.\n                contentContext.onPointerGraceIntentChange(null);\n              }\n            })\n          )}\n          onKeyDown={composeEventHandlers(props.onKeyDown, (event) => {\n            const isTypingAhead = contentContext.searchRef.current !== '';\n            if (props.disabled || (isTypingAhead && event.key === ' ')) return;\n            if (SUB_OPEN_KEYS[context.dir].includes(event.key)) {\n              context.onOpenChange(true);\n              // The trigger may hold focus if opened via pointer interaction\n              // so we ensure content is given focus again when switching to keyboard.\n              context.content?.focus();\n              // prevent window from scrolling\n              event.preventDefault();\n            }\n          })}\n        />\n      </MenuAnchor>\n    ) : null;\n  }\n);\n\nMenuSubTrigger.displayName = SUB_TRIGGER_NAME;\n\n/* ---------------------------------------------------------------------------------------------- */\n\ntype MenuItemImplElement = React.ElementRef<typeof Primitive.div>;\ninterface MenuItemImplProps extends PrimitiveDivProps {\n  disabled?: boolean;\n  textValue?: string;\n}\n\nconst MenuItemImpl = React.forwardRef<MenuItemImplElement, MenuItemImplProps>(\n  (props: ScopedProps<MenuItemImplProps>, forwardedRef) => {\n    const { __scopeMenu, disabled = false, textValue, ...itemProps } = props;\n    const contentContext = useMenuContentContext(ITEM_NAME, __scopeMenu);\n    const rovingFocusGroupScope = useRovingFocusGroupScope(__scopeMenu);\n    const ref = React.useRef<HTMLDivElement>(null);\n    const composedRefs = useComposedRefs(forwardedRef, ref);\n\n    // get the item's `.textContent` as default strategy for typeahead `textValue`\n    const [textContent, setTextContent] = React.useState('');\n    React.useEffect(() => {\n      const menuItem = ref.current;\n      if (menuItem) {\n        setTextContent((menuItem.textContent ?? '').trim());\n      }\n    }, [itemProps.children]);\n\n    return (\n      <Collection.ItemSlot\n        scope={__scopeMenu}\n        disabled={disabled}\n        textValue={textValue ?? textContent}\n      >\n        <RovingFocusGroup.Item asChild {...rovingFocusGroupScope} focusable={!disabled}>\n          <Primitive.div\n            role=\"menuitem\"\n            aria-disabled={disabled || undefined}\n            data-disabled={disabled ? '' : undefined}\n            {...itemProps}\n            ref={composedRefs}\n            /**\n             * We focus items on `pointerMove` to achieve the following:\n             *\n             * - Mouse over an item (it focuses)\n             * - Leave mouse where it is and use keyboard to focus a different item\n             * - Wiggle mouse without it leaving previously focused item\n             * - Previously focused item should re-focus\n             *\n             * If we used `mouseOver`/`mouseEnter` it would not re-focus when the mouse\n             * wiggles. This is to match native menu implementation.\n             */\n            onPointerMove={composeEventHandlers(\n              props.onPointerMove,\n              whenMouse((event) => {\n                if (disabled) {\n                  contentContext.onItemLeave(event);\n                } else {\n                  contentContext.onItemEnter(event);\n                  if (!event.defaultPrevented) {\n                    const item = event.currentTarget;\n                    item.focus();\n                  }\n                }\n              })\n            )}\n            onPointerLeave={composeEventHandlers(\n              props.onPointerLeave,\n              whenMouse((event) => contentContext.onItemLeave(event))\n            )}\n          />\n        </RovingFocusGroup.Item>\n      </Collection.ItemSlot>\n    );\n  }\n);\n\n/* -------------------------------------------------------------------------------------------------\n * MenuCheckboxItem\n * -----------------------------------------------------------------------------------------------*/\n\nconst CHECKBOX_ITEM_NAME = 'MenuCheckboxItem';\n\ntype MenuCheckboxItemElement = MenuItemElement;\ninterface MenuCheckboxItemProps extends MenuItemProps {\n  checked?: boolean;\n  onCheckedChange?: (checked: boolean) => void;\n}\n\nconst MenuCheckboxItem = React.forwardRef<MenuCheckboxItemElement, MenuCheckboxItemProps>(\n  (props: ScopedProps<MenuCheckboxItemProps>, forwardedRef) => {\n    const { checked = false, onCheckedChange, ...checkboxItemProps } = props;\n    return (\n      <ItemIndicatorProvider scope={props.__scopeMenu} checked={checked}>\n        <MenuItem\n          role=\"menuitemcheckbox\"\n          aria-checked={checked}\n          {...checkboxItemProps}\n          ref={forwardedRef}\n          data-state={getCheckedState(checked)}\n          onSelect={composeEventHandlers(\n            checkboxItemProps.onSelect,\n            () => onCheckedChange?.(!checked),\n            { checkForDefaultPrevented: false }\n          )}\n        />\n      </ItemIndicatorProvider>\n    );\n  }\n);\n\nMenuCheckboxItem.displayName = CHECKBOX_ITEM_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuRadioGroup\n * -----------------------------------------------------------------------------------------------*/\n\nconst RADIO_GROUP_NAME = 'MenuRadioGroup';\n\nconst [RadioGroupProvider, useRadioGroupContext] = createMenuContext<MenuRadioGroupProps>(\n  RADIO_GROUP_NAME,\n  { value: undefined, onValueChange: () => {} }\n);\n\ntype MenuRadioGroupElement = React.ElementRef<typeof MenuGroup>;\ninterface MenuRadioGroupProps extends MenuGroupProps {\n  value?: string;\n  onValueChange?: (value: string) => void;\n}\n\nconst MenuRadioGroup = React.forwardRef<MenuRadioGroupElement, MenuRadioGroupProps>(\n  (props: ScopedProps<MenuRadioGroupProps>, forwardedRef) => {\n    const { value, onValueChange, ...groupProps } = props;\n    const handleValueChange = useCallbackRef(onValueChange);\n    return (\n      <RadioGroupProvider scope={props.__scopeMenu} value={value} onValueChange={handleValueChange}>\n        <MenuGroup {...groupProps} ref={forwardedRef} />\n      </RadioGroupProvider>\n    );\n  }\n);\n\nMenuRadioGroup.displayName = RADIO_GROUP_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuRadioItem\n * -----------------------------------------------------------------------------------------------*/\n\nconst RADIO_ITEM_NAME = 'MenuRadioItem';\n\ntype MenuRadioItemElement = React.ElementRef<typeof MenuItem>;\ninterface MenuRadioItemProps extends MenuItemProps {\n  value: string;\n}\n\nconst MenuRadioItem = React.forwardRef<MenuRadioItemElement, MenuRadioItemProps>(\n  (props: ScopedProps<MenuRadioItemProps>, forwardedRef) => {\n    const { value, ...radioItemProps } = props;\n    const context = useRadioGroupContext(RADIO_ITEM_NAME, props.__scopeMenu);\n    const checked = value === context.value;\n    return (\n      <ItemIndicatorProvider scope={props.__scopeMenu} checked={checked}>\n        <MenuItem\n          role=\"menuitemradio\"\n          aria-checked={checked}\n          {...radioItemProps}\n          ref={forwardedRef}\n          data-state={getCheckedState(checked)}\n          onSelect={composeEventHandlers(\n            radioItemProps.onSelect,\n            () => context.onValueChange?.(value),\n            { checkForDefaultPrevented: false }\n          )}\n        />\n      </ItemIndicatorProvider>\n    );\n  }\n);\n\nMenuRadioItem.displayName = RADIO_ITEM_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuItemIndicator\n * -----------------------------------------------------------------------------------------------*/\n\nconst ITEM_INDICATOR_NAME = 'MenuItemIndicator';\n\nconst [ItemIndicatorProvider, useItemIndicatorContext] = createMenuContext(ITEM_INDICATOR_NAME, {\n  checked: false,\n});\n\ntype MenuItemIndicatorElement = React.ElementRef<typeof Primitive.span>;\ntype PrimitiveSpanProps = Radix.ComponentPropsWithoutRef<typeof Primitive.span>;\ninterface MenuItemIndicatorProps extends PrimitiveSpanProps {\n  /**\n   * Used to force mounting when more control is needed. Useful when\n   * controlling animation with React animation libraries.\n   */\n  forceMount?: true;\n}\n\nconst MenuItemIndicator = React.forwardRef<MenuItemIndicatorElement, MenuItemIndicatorProps>(\n  (props: ScopedProps<MenuItemIndicatorProps>, forwardedRef) => {\n    const { __scopeMenu, forceMount, ...itemIndicatorProps } = props;\n    const indicatorContext = useItemIndicatorContext(ITEM_INDICATOR_NAME, __scopeMenu);\n    return (\n      <Presence present={forceMount || indicatorContext.checked}>\n        <Primitive.span\n          {...itemIndicatorProps}\n          ref={forwardedRef}\n          data-state={getCheckedState(indicatorContext.checked)}\n        />\n      </Presence>\n    );\n  }\n);\n\nMenuItemIndicator.displayName = ITEM_INDICATOR_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuSeparator\n * -----------------------------------------------------------------------------------------------*/\n\nconst SEPARATOR_NAME = 'MenuSeparator';\n\ntype MenuSeparatorElement = React.ElementRef<typeof Primitive.div>;\ninterface MenuSeparatorProps extends PrimitiveDivProps {}\n\nconst MenuSeparator = React.forwardRef<MenuSeparatorElement, MenuSeparatorProps>(\n  (props: ScopedProps<MenuSeparatorProps>, forwardedRef) => {\n    const { __scopeMenu, ...separatorProps } = props;\n    return (\n      <Primitive.div\n        role=\"separator\"\n        aria-orientation=\"horizontal\"\n        {...separatorProps}\n        ref={forwardedRef}\n      />\n    );\n  }\n);\n\nMenuSeparator.displayName = SEPARATOR_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuArrow\n * -----------------------------------------------------------------------------------------------*/\n\nconst ARROW_NAME = 'MenuArrow';\n\ntype MenuArrowElement = React.ElementRef<typeof PopperPrimitive.Arrow>;\ntype PopperArrowProps = Radix.ComponentPropsWithoutRef<typeof PopperPrimitive.Arrow>;\ninterface MenuArrowProps extends PopperArrowProps {}\n\nconst MenuArrow = React.forwardRef<MenuArrowElement, MenuArrowProps>(\n  (props: ScopedProps<MenuArrowProps>, forwardedRef) => {\n    const { __scopeMenu, ...arrowProps } = props;\n    const popperScope = usePopperScope(__scopeMenu);\n    return <PopperPrimitive.Arrow {...popperScope} {...arrowProps} ref={forwardedRef} />;\n  }\n);\n\nMenuArrow.displayName = ARROW_NAME;\n\n/* -----------------------------------------------------------------------------------------------*/\n\nfunction getOpenState(open: boolean) {\n  return open ? 'open' : 'closed';\n}\n\nfunction getCheckedState(checked: boolean) {\n  return checked ? 'checked' : 'unchecked';\n}\n\nfunction focusFirst(candidates: HTMLElement[]) {\n  const PREVIOUSLY_FOCUSED_ELEMENT = document.activeElement;\n  for (const candidate of candidates) {\n    // if focus is already where we want to go, we don't want to keep going through the candidates\n    if (candidate === PREVIOUSLY_FOCUSED_ELEMENT) return;\n    candidate.focus();\n    if (document.activeElement !== PREVIOUSLY_FOCUSED_ELEMENT) return;\n  }\n}\n\n/**\n * Wraps an array around itself at a given start index\n * Example: `wrapArray(['a', 'b', 'c', 'd'], 2) === ['c', 'd', 'a', 'b']`\n */\nfunction wrapArray<T>(array: T[], startIndex: number) {\n  return array.map((_, index) => array[(startIndex + index) % array.length]);\n}\n\n/**\n * This is the \"meat\" of the typeahead matching logic. It takes in all the values,\n * the search and the current match, and returns the next match (or `undefined`).\n *\n * We normalize the search because if a user has repeatedly pressed a character,\n * we want the exact same behavior as if we only had that one character\n * (ie. cycle through options starting with that character)\n *\n * We also reorder the values by wrapping the array around the current match.\n * This is so we always look forward from the current match, and picking the first\n * match will always be the correct one.\n *\n * Finally, if the normalized search is exactly one character, we exclude the\n * current match from the values because otherwise it would be the first to match always\n * and focus would never move. This is as opposed to the regular case, where we\n * don't want focus to move if the current match still matches.\n */\nfunction getNextMatch(values: string[], search: string, currentMatch?: string) {\n  const isRepeated = search.length > 1 && Array.from(search).every((char) => char === search[0]);\n  const normalizedSearch = isRepeated ? search[0] : search;\n  const currentMatchIndex = currentMatch ? values.indexOf(currentMatch) : -1;\n  let wrappedValues = wrapArray(values, Math.max(currentMatchIndex, 0));\n  const excludeCurrentMatch = normalizedSearch.length === 1;\n  if (excludeCurrentMatch) wrappedValues = wrappedValues.filter((v) => v !== currentMatch);\n  const nextMatch = wrappedValues.find((value) =>\n    value.toLowerCase().startsWith(normalizedSearch.toLowerCase())\n  );\n  return nextMatch !== currentMatch ? nextMatch : undefined;\n}\n\ntype Point = { x: number; y: number };\ntype Polygon = Point[];\ntype Side = 'left' | 'right';\ntype GraceIntent = { area: Polygon; side: Side };\n\n// Determine if a point is inside of a polygon.\n// Based on https://github.com/substack/point-in-polygon\nfunction isPointInPolygon(point: Point, polygon: Polygon) {\n  const { x, y } = point;\n  let inside = false;\n  for (let i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {\n    const xi = polygon[i].x;\n    const yi = polygon[i].y;\n    const xj = polygon[j].x;\n    const yj = polygon[j].y;\n\n    // prettier-ignore\n    const intersect = ((yi > y) !== (yj > y)) && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);\n    if (intersect) inside = !inside;\n  }\n\n  return inside;\n}\n\nfunction isPointerInGraceArea(event: React.PointerEvent, area?: Polygon) {\n  if (!area) return false;\n  const cursorPos = { x: event.clientX, y: event.clientY };\n  return isPointInPolygon(cursorPos, area);\n}\n\nfunction whenMouse<E>(handler: React.PointerEventHandler<E>): React.PointerEventHandler<E> {\n  return (event) => (event.pointerType === 'mouse' ? handler(event) : undefined);\n}\n\nconst Root = Menu;\nconst Sub = MenuSub;\nconst Anchor = MenuAnchor;\nconst SubTrigger = MenuSubTrigger;\nconst Content = MenuContent;\nconst Group = MenuGroup;\nconst Label = MenuLabel;\nconst Item = MenuItem;\nconst CheckboxItem = MenuCheckboxItem;\nconst RadioGroup = MenuRadioGroup;\nconst RadioItem = MenuRadioItem;\nconst ItemIndicator = MenuItemIndicator;\nconst Separator = MenuSeparator;\nconst Arrow = MenuArrow;\n\nexport {\n  createMenuScope,\n  //\n  Menu,\n  MenuSub,\n  MenuAnchor,\n  MenuSubTrigger,\n  MenuContent,\n  MenuGroup,\n  MenuLabel,\n  MenuItem,\n  MenuCheckboxItem,\n  MenuRadioGroup,\n  MenuRadioItem,\n  MenuItemIndicator,\n  MenuSeparator,\n  MenuArrow,\n  //\n  Root,\n  Sub,\n  Anchor,\n  SubTrigger,\n  Content,\n  Group,\n  Label,\n  Item,\n  CheckboxItem,\n  RadioGroup,\n  RadioItem,\n  ItemIndicator,\n  Separator,\n  Arrow,\n};\nexport type {\n  MenuProps,\n  MenuSubProps,\n  MenuAnchorProps,\n  MenuSubTriggerProps,\n  MenuContentProps,\n  MenuGroupProps,\n  MenuLabelProps,\n  MenuItemProps,\n  MenuCheckboxItemProps,\n  MenuRadioGroupProps,\n  MenuRadioItemProps,\n  MenuItemIndicatorProps,\n  MenuSeparatorProps,\n  MenuArrowProps,\n};\n"]},"metadata":{},"sourceType":"module"}